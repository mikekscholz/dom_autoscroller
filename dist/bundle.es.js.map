{"version":3,"file":"bundle.es.js","sources":["../src/index.js"],"sourcesContent":["import { boolean } from 'type-func';\r\nimport {\r\n\trequestAnimationFrame as requestFrame,\r\n\tcancelAnimationFrame as cancelFrame\r\n} from 'animation-frame-polyfill';\r\nimport {\r\n\thasElement,\r\n\taddElements,\r\n\tremoveElements\r\n} from 'dom-set';\r\n\r\nimport {\r\n\tcreatePointCB,\r\n\tgetClientRect as getRect,\r\n\tpointInside\r\n} from 'dom-plane';\r\n\r\nimport mousemoveDispatcher from 'dom-mousemove-dispatcher';\r\n\r\nfunction AutoScroller(elements, options = {}) {\r\n\tconst self = this;\r\n\tlet maxSpeed = 4, scrolling = false;\r\n\r\n\tthis.margin = options.margin || -1;\r\n\t//this.scrolling = false;\r\n\tthis.scrollWhenOutside = options.scrollWhenOutside || false;\r\n\r\n\tlet point = {},\r\n\t\tpointCB = createPointCB(point),\r\n\t\tdispatcher = mousemoveDispatcher(),\r\n\t\tdown = false;\r\n\r\n\twindow.addEventListener('mousemove', pointCB, false);\r\n\twindow.addEventListener('touchmove', pointCB, false);\r\n\r\n\tif (!isNaN(options.maxSpeed)) {\r\n\t\tmaxSpeed = options.maxSpeed;\r\n\t}\r\n\r\n\tthis.autoScroll = boolean(options.autoScroll);\r\n\tthis.syncMove = boolean(options.syncMove, false);\r\n\r\n\tthis.destroy = function (forceCleanAnimation) {\r\n\t\twindow.removeEventListener('mousemove', pointCB, false);\r\n\t\twindow.removeEventListener('touchmove', pointCB, false);\r\n\t\twindow.removeEventListener('mousedown', onDown, false);\r\n\t\twindow.removeEventListener('touchstart', onDown, false);\r\n\t\twindow.removeEventListener('mouseup', onUp, false);\r\n\t\twindow.removeEventListener('touchend', onUp, false);\r\n\t\twindow.removeEventListener('pointerup', onUp, false);\r\n\t\twindow.removeEventListener('mouseleave', onMouseOut, false);\r\n\r\n\t\twindow.removeEventListener('mousemove', onMove, false);\r\n\t\twindow.removeEventListener('touchmove', onMove, false);\r\n\r\n\t\twindow.removeEventListener('scroll', setScroll, true);\r\n\t\telements = [];\r\n\t\tif (forceCleanAnimation) {\r\n\t\t\tcleanAnimation();\r\n\t\t}\r\n\t};\r\n\r\n\tthis.add = function (...element) {\r\n\t\taddElements(elements, ...element);\r\n\t\treturn this;\r\n\t};\r\n\r\n\tthis.remove = function (...element) {\r\n\t\treturn removeElements(elements, ...element);\r\n\t};\r\n\r\n\tlet hasWindow = null, windowAnimationFrame;\r\n\r\n\tif (Object.prototype.toString.call(elements) !== '[object Array]') {\r\n\t\telements = [elements];\r\n\t}\r\n\r\n\t(function (temp) {\r\n\t\telements = [];\r\n\t\ttemp.forEach(function (element) {\r\n\t\t\tif (element === window) {\r\n\t\t\t\thasWindow = window;\r\n\t\t\t} else {\r\n\t\t\t\tself.add(element);\r\n\t\t\t}\r\n\t\t})\r\n\t}(elements));\r\n\r\n\tObject.defineProperties(this, {\r\n\t\tdown: {\r\n\t\t\tget: function () { return down; }\r\n\t\t},\r\n\t\tmaxSpeed: {\r\n\t\t\tget: function () { return maxSpeed; }\r\n\t\t},\r\n\t\tpoint: {\r\n\t\t\tget: function () { return point; }\r\n\t\t},\r\n\t\tscrolling: {\r\n\t\t\tget: function () { return scrolling; }\r\n\t\t}\r\n\t});\r\n\r\n\tlet n = 0, current = null, animationFrame;\r\n\r\n\twindow.addEventListener('mousedown', onDown, false);\r\n\twindow.addEventListener('touchstart', onDown, false);\r\n\twindow.addEventListener('mouseup', onUp, false);\r\n\twindow.addEventListener('touchend', onUp, false);\r\n\r\n\t/*\r\n\tIE does not trigger mouseup event when scrolling.\r\n\tIt is a known issue that Microsoft won't fix.\r\n\thttps://connect.microsoft.com/IE/feedback/details/783058/scrollbar-trigger-mousedown-but-not-mouseup\r\n\tIE supports pointer events instead\r\n\t*/\r\n\twindow.addEventListener('pointerup', onUp, false);\r\n\r\n\twindow.addEventListener('mousemove', onMove, false);\r\n\twindow.addEventListener('touchmove', onMove, false);\r\n\r\n\twindow.addEventListener('mouseleave', onMouseOut, false);\r\n\r\n\twindow.addEventListener('scroll', setScroll, true);\r\n\r\n\tfunction setScroll(e) {\r\n\r\n\t\tfor (let i = 0; i < elements.length; i++) {\r\n\t\t\tif (elements[i] === e.target) {\r\n\t\t\t\tscrolling = true;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (scrolling) {\r\n\t\t\trequestFrame(() => scrolling = false)\r\n\t\t}\r\n\t}\r\n\r\n\tfunction onDown() {\r\n\t\tdown = true;\r\n\t}\r\n\r\n\tfunction onUp() {\r\n\t\tdown = false;\r\n\t\tcleanAnimation();\r\n\t}\r\n\tfunction cleanAnimation() {\r\n\t\tcancelFrame(animationFrame);\r\n\t\tcancelFrame(windowAnimationFrame);\r\n\t}\r\n\tfunction onMouseOut() {\r\n\t\tdown = false;\r\n\t}\r\n\r\n\tfunction getTarget(target) {\r\n\t\tif (!target) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tif (current === target) {\r\n\t\t\treturn target;\r\n\t\t}\r\n\r\n\t\tif (hasElement(elements, target)) {\r\n\t\t\treturn target;\r\n\t\t}\r\n\r\n\t\twhile (target = target.parentNode) {\r\n\t\t\tif (hasElement(elements, target)) {\r\n\t\t\t\treturn target;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\t}\r\n\r\n\tfunction getElementUnderPoint() {\r\n\t\tlet underPoint = null;\r\n\r\n\t\tfor (var i = 0; i < elements.length; i++) {\r\n\t\t\tif (inside(point, elements[i])) {\r\n\t\t\t\tunderPoint = elements[i];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn underPoint;\r\n\t}\r\n\r\n\r\n\tfunction onMove(event) {\r\n\r\n\t\tif (!self.autoScroll()) return;\r\n\r\n\t\tif (event['dispatched']) { return; }\r\n\r\n\t\tlet target = event.target, body = document.body;\r\n\r\n\t\tif (current && !inside(point, current)) {\r\n\t\t\tif (!self.scrollWhenOutside) {\r\n\t\t\t\tcurrent = null;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (target && target.parentNode === body) {\r\n\t\t\t//The special condition to improve speed.\r\n\t\t\ttarget = getElementUnderPoint();\r\n\t\t} else {\r\n\t\t\ttarget = getTarget(target);\r\n\r\n\t\t\tif (!target) {\r\n\t\t\t\ttarget = getElementUnderPoint();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\tif (target && target !== current) {\r\n\t\t\tcurrent = target;\r\n\t\t}\r\n\r\n\t\tif (hasWindow) {\r\n\t\t\tcancelFrame(windowAnimationFrame);\r\n\t\t\twindowAnimationFrame = requestFrame(scrollWindow);\r\n\t\t}\r\n\r\n\r\n\t\tif (!current) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tcancelFrame(animationFrame);\r\n\t\tanimationFrame = requestFrame(scrollTick);\r\n\t}\r\n\r\n\tfunction scrollWindow() {\r\n\t\tautoScroll(hasWindow);\r\n\r\n\t\tcancelFrame(windowAnimationFrame);\r\n\t\twindowAnimationFrame = requestFrame(scrollWindow);\r\n\t}\r\n\r\n\tfunction scrollTick() {\r\n\r\n\t\tif (!current) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tautoScroll(current);\r\n\r\n\t\tcancelFrame(animationFrame);\r\n\t\tanimationFrame = requestFrame(scrollTick);\r\n\r\n\t}\r\n\r\n\r\n\tfunction autoScroll(el) {\r\n\t\tlet rect = getRect(el), scrollx, scrolly;\r\n\r\n\t\tif (point.y > rect.top && point.y < rect.bottom) {\r\n\t\t\tif (point.x < rect.left + self.margin) {\r\n\t\t\t\tscrollx = Math.floor(\r\n\t\t\t\t\tMath.max(-1, (point.x - rect.left) / self.margin - 1) * self.maxSpeed\r\n\t\t\t\t);\r\n\t\t\t} else if (point.x > rect.right - self.margin) {\r\n\t\t\t\tscrollx = Math.ceil(\r\n\t\t\t\t\tMath.min(1, (point.x - rect.right) / self.margin + 1) * self.maxSpeed\r\n\t\t\t\t);\r\n\t\t\t} else {\r\n\t\t\t\tscrollx = 0;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (point.x > rect.left && point.x < rect.right) {\r\n\t\t\tif (point.y < rect.top + self.margin) {\r\n\t\t\t\tscrolly = Math.floor(\r\n\t\t\t\t\tMath.max(-1, (point.y - rect.top) / self.margin - 1) * self.maxSpeed\r\n\t\t\t\t);\r\n\t\t\t} else if (point.y > rect.bottom - self.margin) {\r\n\t\t\t\tscrolly = Math.ceil(\r\n\t\t\t\t\tMath.min(1, (point.y - rect.bottom) / self.margin + 1) * self.maxSpeed\r\n\t\t\t\t);\r\n\t\t\t} else {\r\n\t\t\t\tscrolly = 0;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (self.syncMove()) {\r\n\t\t\t/*\r\n\t\t\tNotes about mousemove event dispatch.\r\n\t\t\tscreen(X/Y) should need to be updated.\r\n\t\t\tSome other properties might need to be set.\r\n\t\t\tKeep the syncMove option default false until all inconsistencies are taken care of.\r\n\t\t\t*/\r\n\t\t\tdispatcher.dispatch(el, {\r\n\t\t\t\tpageX: point.pageX + scrollx,\r\n\t\t\t\tpageY: point.pageY + scrolly,\r\n\t\t\t\tclientX: point.x + scrollx,\r\n\t\t\t\tclientY: point.y + scrolly\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tsetTimeout(() => {\r\n\r\n\t\t\tif (scrolly) {\r\n\t\t\t\tscrollY(el, scrolly);\r\n\t\t\t}\r\n\r\n\t\t\tif (scrollx) {\r\n\t\t\t\tscrollX(el, scrollx);\r\n\t\t\t}\r\n\r\n\t\t});\r\n\t}\r\n\r\n\tfunction scrollY(el, amount) {\r\n\t\tif (el === window) {\r\n\t\t\twindow.scrollTo(el.pageXOffset, el.pageYOffset + amount);\r\n\t\t} else {\r\n\t\t\tel.scrollTop += amount;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction scrollX(el, amount) {\r\n\t\tif (el === window) {\r\n\t\t\twindow.scrollTo(el.pageXOffset + amount, el.pageYOffset);\r\n\t\t} else {\r\n\t\t\tel.scrollLeft += amount;\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nexport default function AutoScrollerFactory(element, options) {\r\n\treturn new AutoScroller(element, options);\r\n}\r\n\r\nfunction inside(point, el, rect) {\r\n\tif (!rect) {\r\n\t\treturn pointInside(point, el);\r\n\t} else {\r\n\t\treturn (point.y > rect.top && point.y < rect.bottom &&\r\n\t\t\tpoint.x > rect.left && point.x < rect.right);\r\n\t}\r\n}\r\n\r\n/*\r\ngit remote add origin https://github.com/hollowdoor/dom_autoscroller.git\r\ngit push -u origin master\r\n*/\r\n"],"names":["const","let","requestFrame","cancelFrame","getRect"],"mappings":"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"}